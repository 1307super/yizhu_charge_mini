# 首页接口文档

## 1. 获取充电站列表

### 接口地址
```
POST /api/charging/getPlotInfoPage
```

### 请求方式
POST

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| pageNo | int | 是 | 页码，从1开始 |
| pageSize | int | 是 | 每页数量，建议10-20 |
| deviceType | int | 否 | 设备类型，4=全部类型 |
| lat | double | 是 | 当前纬度 |
| lng | double | 是 | 当前经度 |
| sortType | int | 是 | 排序类型：1=距离最近，2=价格最低，3=智能排序，4=空闲较多 |
| distance | int | 否 | 搜索范围（米），默认100000000 |
| city | string | 否 | 城市名称，如"北京市" |
| keyword | string | 否 | 搜索关键词 |

### 请求示例
```json
{
  "pageNo": 1,
  "pageSize": 10,
  "deviceType": 4,
  "lat": 39.9045035,
  "lng": 116.408788,
  "sortType": 1,
  "distance": 100000000,
  "city": "北京市"
}
```

### 响应参数
| 参数名 | 类型 | 说明 |
|--------|------|------|
| code | int | 状态码，200为成功 |
| message | string | 响应消息 |
| data | object | 响应数据 |
| data.records | array | 充电站列表 |
| data.total | int | 总记录数 |
| data.pages | int | 总页数 |
| data.current | int | 当前页码 |

#### 充电站记录字段说明 (records数组元素)
| 参数名 | 类型 | 说明 |
|--------|------|------|
| stationId | string | 充电站ID |
| stationName | string | 充电站名称 |
| address | string | 充电站地址 |
| latitude | double | 纬度 |
| longitude | double | 经度 |
| distance | int | 距离（米） |
| parkCarInfo | string | 停车信息 |
| superNum | int | 超充桩总数 |
| superToNoBusy | int | 超充桩空闲数 |
| fastNum | int | 快充桩总数 |
| fastToNoBusy | int | 快充桩空闲数 |
| price | double | 起始价格（元/度） |
| deviceType | int | 设备类型 |

### 响应示例
```json
{
  "code": 200,
  "message": "成功",
  "data": {
    "records": [
      {
        "stationId": "12345",
        "stationName": "吉运超充站(国贸店)",
        "address": "北京市朝阳区国贸中心",
        "latitude": 39.9045035,
        "longitude": 116.408788,
        "distance": 1200,
        "parkCarInfo": "免费停车2小时",
        "superNum": 8,
        "superToNoBusy": 3,
        "fastNum": 4,
        "fastToNoBusy": 2,
        "price": 1.2,
        "deviceType": 4
      }
    ],
    "total": 50,
    "pages": 5,
    "current": 1
  }
}
```

---

## 2. 获取城市列表

### 接口地址
```
GET /api/common/getCityList
```

### 请求方式
GET

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| provinceId | string | 否 | 省份ID，不传则返回所有省市 |

### 响应参数
| 参数名 | 类型 | 说明 |
|--------|------|------|
| code | int | 状态码，200为成功 |
| message | string | 响应消息 |
| data | array | 城市列表 |

#### 城市记录字段说明
| 参数名 | 类型 | 说明 |
|--------|------|------|
| id | string | 城市ID |
| name | string | 城市名称 |
| provinceId | string | 省份ID |
| provinceName | string | 省份名称 |

### 响应示例
```json
{
  "code": 200,
  "message": "成功",
  "data": [
    {
      "id": "110000",
      "name": "北京市",
      "provinceId": "11",
      "provinceName": "北京"
    },
    {
      "id": "310000",
      "name": "上海市",
      "provinceId": "31",
      "provinceName": "上海"
    }
  ]
}
```

---

## 3. 搜索充电站

### 接口地址
```
POST /api/charging/searchStation
```

### 请求方式
POST

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| keyword | string | 是 | 搜索关键词 |
| lat | double | 是 | 当前纬度 |
| lng | double | 是 | 当前经度 |
| city | string | 否 | 城市名称 |
| pageNo | int | 否 | 页码，默认1 |
| pageSize | int | 否 | 每页数量，默认10 |

### 请求示例
```json
{
  "keyword": "国贸",
  "lat": 39.9045035,
  "lng": 116.408788,
  "city": "北京市",
  "pageNo": 1,
  "pageSize": 10
}
```

### 响应参数
同"获取充电站列表"接口响应格式

---

## 4. 获取用户订单列表

### 接口地址
```
POST /api/order/getUserOrderList
```

### 请求方式
POST

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| pageNo | int | 是 | 页码，从1开始 |
| pageSize | int | 是 | 每页数量 |
| status | int | 否 | 订单状态：0=全部，1=充电中，2=已完成，3=已取消 |

### 响应参数
| 参数名 | 类型 | 说明 |
|--------|------|------|
| code | int | 状态码，200为成功 |
| message | string | 响应消息 |
| data | object | 响应数据 |
| data.records | array | 订单列表 |

#### 订单记录字段说明
| 参数名 | 类型 | 说明 |
|--------|------|------|
| orderId | string | 订单ID |
| stationName | string | 充电站名称 |
| startTime | string | 开始时间 |
| endTime | string | 结束时间 |
| totalAmount | double | 总金额 |
| status | int | 订单状态 |

---

## 5. 获取客服信息

### 接口地址
```
GET /api/common/getServiceInfo
```

### 请求方式
GET

### 响应参数
| 参数名 | 类型 | 说明 |
|--------|------|------|
| code | int | 状态码，200为成功 |
| message | string | 响应消息 |
| data | object | 客服信息 |
| data.phone | string | 客服电话 |
| data.workTime | string | 工作时间 |
| data.wechat | string | 微信客服号 |

### 响应示例
```json
{
  "code": 200,
  "message": "成功",
  "data": {
    "phone": "400-123-4567",
    "workTime": "9:00-18:00",
    "wechat": "huizhi_service"
  }
}
```

---

## 错误码说明
| 错误码 | 说明 |
|--------|------|
| 200 | 请求成功 |
| 400 | 请求参数错误 |
| 401 | 未授权访问 |
| 403 | 禁止访问 |
| 404 | 接口不存在 |
| 500 | 服务器内部错误 |

## 公共请求头
```
Content-Type: application/json
Authorization: Bearer {token}
User-Agent: {小程序标识}
```

## 注意事项
1. 所有接口请求需要携带用户token（除公共接口外）
2. 坐标系使用GCJ-02（国测局坐标系）
3. 时间格式统一使用：yyyy-MM-dd HH:mm:ss
4. 距离单位统一使用米(m)
5. 价格单位统一使用元
6. 接口请求超时时间建议设置为30秒