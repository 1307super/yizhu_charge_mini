# 订单接口文档

## 1. 充电批次列表查询

### 接口描述
查询充电批次列表，支持根据用户ID或手机号查询。

### 接口地址
`GET /order/queryOrderList`

### 请求参数
| 参数名 | 类型 | 必填 | 说明                |
|--------|------|----|-------------------|
| pageNum | Long | 是  | 页码                |
| pageSize | Long | 是  | 分页条数              |
| orderState | String | 否  | 1-进行中，2-已完成，3-已关闭 |

> **注意：** userId 和 mobile 至少提供一个

### 响应参数
| 参数名 | 类型 | 说明                          |
|--------|------|-----------------------------|
| stationName | String | 站点名称                        |
| batchStatus | Integer | 批次状态：1-进行中，2-已完成，3-已关闭，4-退款失败 |
| chargePower | BigDecimal | 充电量(度)                      |
| chargeAmount | BigDecimal | 充电金额(元)                     |
| chargeDuration | String | 充电时长                        |
| startTime | Date | 开始时间                        |
| batchNo | String | 批次号                         |
| vehicleVin | String | 车架号                         |
| licensePlate | String | 车牌号                         |

### 响应示例
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": [
    {
      "stationName": "北京朝阳充电站",
      "batchStatus": 2,
      "chargePower": "35.68",
      "chargeAmount": "42.50",
      "chargeDuration": "02:30:15",
      "startTime": "2025-01-16 10:30:00",
      "batchNo": "BATCH202501160001",
      "vehicleVin": "LGWEF4A59FY123456",
      "licensePlate": "京A12345"
    }
  ]
}
```

## 2. 充电批次详情查询

### 接口描述
根据批次号查询充电批次详情，包含批次汇总信息和所有订单详情。

### 接口地址
`GET order/getChargingOrderDetail`

### 请求参数
| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| batchNo | String | 是 | 批次号 |

### 响应参数

#### 批次信息
| 参数名 | 类型 | 说明 |
|--------|------|------|
| batchNo | String | 批次号 |
| stationId | String | 充电站ID |
| stationName | String | 充电站名称 |
| licensePlate | String | 车牌号 |
| vehicleVin | String | 车架号 |
| startTime | Date | 批次开始时间 |
| status | Integer | 批次状态：0-已结束，1-充电中，2-异常 |
| totalChargeFee | BigDecimal | 总电费(元) |
| totalPower | BigDecimal | 总度数(度) |
| totalOriginalServiceFee | BigDecimal | 优惠前服务费(元) |
| totalServiceFee | BigDecimal | 优惠后服务费(元) |
| totalAmount | BigDecimal | 批次总金额(元) |
| orders | Array | 订单列表 |

#### 订单信息 (orders数组元素)
| 参数名 | 类型 | 说明 |
|--------|------|------|
| orderNumber | String | 订单编号 |
| gunNo | String | 枪号 |
| chargeFee | BigDecimal | 电费(元) |
| originalServiceFee | BigDecimal | 优惠前服务费(元) |
| serviceFee | BigDecimal | 优惠后服务费(元) |
| actualAmount | BigDecimal | 实付金额(元) |
| startTime | Date | 充电开始时间 |
| endTime | Date | 充电结束时间 |
| chargeDuration | String | 充电时长 |
| orderId | String | 订单ID（兼容字段） |
| gunId | String | 充电枪ID（兼容字段） |
| soc | BigDecimal | 电池电量百分比(0-100) |
| power | BigDecimal | 充电度数(度) |
| current | BigDecimal | 实时电流(A) |
| voltage | BigDecimal | 实时电压(V) |
| estimatedTime | Long | 预估剩余时间(分钟) |
| status | Integer | 订单状态：0-已结束，1-充电中，2-暂停，3-异常 |

### 响应示例
```json
{
  "code": 200,
  "msg": "操作成功",
  "data": {
    "batchNo": "BATCH202501160001",
    "stationId": "1001",
    "stationName": "北京朝阳充电站",
    "licensePlate": "京A12345",
    "vehicleVin": "LGWEF4A59FY123456",
    "startTime": "2025-01-16 10:30:00",
    "status": 1,
    "totalChargeFee": "35.60",
    "totalPower": "35.68",
    "totalOriginalServiceFee": "8.00",
    "totalServiceFee": "6.40",
    "totalAmount": "42.00",
    "orders": [
      {
        "orderNumber": "ORDER202501160001",
        "gunNo": "01",
        "chargeFee": "35.60",
        "originalServiceFee": "8.00",
        "serviceFee": "6.40",
        "actualAmount": "42.00",
        "startTime": "2025-01-16 10:30:00",
        "endTime": "2025-01-16 13:00:15",
        "chargeDuration": "02:30:15",
        "orderId": "ORDER202501160001",
        "gunId": "100101",
        "soc": "85.5",
        "power": "35.68",
        "current": "125.6",
        "voltage": "380.2",
        "estimatedTime": 15,
        "status": 1
      }
    ]
  }
}
```

### 4. 金额说明
- **电费**：充电用电的费用
- **服务费**：充电服务费用（可能有优惠）
- **实付金额**：订单的实际支付金额（电费+服务费）
- **批次总金额**：所有订单实付金额的汇总